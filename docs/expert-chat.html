<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Mate - 전문가와 채팅</title>
    <style>
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");

        :root {
            --primary-blue: #18c3b7;
            --primary-dark: rgb(9, 123, 116);
            --primary-light: #e8f1ff;
            --purple-gradient-start: #e8d5ff;
            --purple-gradient-end: #f3e8ff;
            --blue-gradient-start: #d5e8ff;
            --blue-gradient-end: #e8f4ff;
            --black: #000000;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            line-height: 1.5;
            color: var(--gray-800);
            background: var(--gray-50);
            height: 100vh;
            overflow: hidden;
        }

        .chat-container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: var(--white);
            border-right: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-200);
        }

        .back-btn {
            background: var(--gray-100);
            color: var(--gray-600);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 16px;
        }

        .back-btn:hover {
            background: var(--gray-200);
        }

        .project-info {
            background: linear-gradient(135deg, var(--purple-gradient-start), var(--purple-gradient-end));
            border-radius: 12px;
            padding: 16px;
        }

        .project-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 4px;
        }

        .project-status {
            font-size: 12px;
            color: var(--success);
            font-weight: 600;
        }

        .schedule-section {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .schedule-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 16px;
        }

        .schedule-item {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            border-left: 3px solid var(--gray-300);
        }

        .schedule-item.completed {
            border-left-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .schedule-item.current {
            border-left-color: var(--primary-blue);
            background: var(--primary-light);
        }

        .schedule-week {
            font-size: 12px;
            color: var(--gray-500);
            margin-bottom: 4px;
        }

        .schedule-task {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-800);
        }

        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--white);
        }

        .chat-header {
            background: var(--primary-blue);
            color: var(--white);
            padding: 20px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .expert-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .expert-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--white);
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .expert-details h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .expert-status {
            font-size: 12px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .online-indicator {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--white);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 70%;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message-avatar.expert {
            background: var(--primary-blue);
            color: var(--white);
        }

        .message-avatar.user {
            background: var(--gray-200);
            color: var(--gray-800);
        }

        .message-content {
            background: var(--gray-100);
            padding: 12px 16px;
            border-radius: 16px;
            position: relative;
        }

        .message.user .message-content {
            background: var(--primary-blue);
            color: var(--white);
        }

        .message-time {
            font-size: 11px;
            color: var(--gray-400);
            margin-top: 4px;
            text-align: right;
        }

        .message.expert .message-time {
            text-align: left;
        }

        .system-message {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            text-align: center;
            margin: 16px 0;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .warning-message {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            text-align: center;
            margin: 16px 0;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .ai-guide {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .ai-guide-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .ai-guide-title {
            font-size: 14px;
            font-weight: 600;
            color: #3b82f6;
        }

        .ai-guide-content {
            font-size: 13px;
            color: var(--gray-600);
            line-height: 1.4;
        }

        .file-message {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-size: 16px;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .file-size {
            font-size: 12px;
            color: var(--gray-500);
        }

        .file-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .file-btn {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .file-btn:hover {
            background: var(--primary-dark);
        }

        .file-btn.secondary {
            background: var(--gray-200);
            color: var(--gray-700);
        }

        .file-btn.secondary:hover {
            background: var(--gray-300);
        }

        .chat-input-area {
            padding: 16px 24px;
            background: var(--white);
            border-top: 1px solid var(--gray-200);
        }

        .chat-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .action-btn {
            background: var(--gray-100);
            color: var(--gray-600);
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: var(--primary-light);
            color: var(--primary-blue);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            border: 2px solid var(--gray-200);
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .chat-input:focus {
            border-color: var(--primary-blue);
        }

        .send-btn {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: var(--gray-400);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {
            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .message {
                max-width: 85%;
            }

            .chat-messages {
                padding: 16px;
            }

            .chat-input-area {
                padding: 16px;
            }
        }
    </style>
</head>

<body>
    <div class="chat-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <button class="back-btn" onclick="goBack()">← 매칭 목록</button>
                <div class="project-info">
                    <div class="project-title">온라인 쇼핑몰 제작</div>
                    <div class="project-status">● 매칭 성공</div>
                </div>
            </div>
            
            <div class="schedule-section">
                <div class="schedule-title">📅 학습 일정</div>
                
                <div class="schedule-item completed">
                    <div class="schedule-week">1주차 (완료)</div>
                    <div class="schedule-task">기획 및 설계</div>
                </div>
                
                <div class="schedule-item current">
                    <div class="schedule-week">2주차 (수요일 예정)</div>
                    <div class="schedule-task">HTML/CSS 기초</div>
                </div>
                
                <div class="schedule-item">
                    <div class="schedule-week">3주차</div>
                    <div class="schedule-task">상품 페이지 제작</div>
                </div>
                
                <div class="schedule-item">
                    <div class="schedule-week">4주차</div>
                    <div class="schedule-task">장바구니 & 결제</div>
                </div>
            </div>
        </aside>

        <main class="main-chat">
            <header class="chat-header">
                <div class="expert-info">
                    <div class="expert-avatar">김</div>
                    <div class="expert-details">
                        <h3>김준호 전문가</h3>
                        <div class="expert-status">
                            <div class="online-indicator"></div>
                            온라인 • 보통 1시간 내 응답
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="header-btn">📁 파일</button>
                    <button class="header-btn">📋 일정</button>
                </div>
            </header>

            <div class="chat-messages" id="chatMessages">
                <div class="system-message">
                    🎉 김준호 전문가와의 매칭이 성공했습니다! 온라인 쇼핑몰 제작 프로젝트를 시작해보세요.
                </div>

                <div class="message">
                    <div class="message-avatar expert">김</div>
                    <div class="message-content">
                        <p>안녕하세요! 김준호입니다. 🙌</p>
                        <p>온라인 쇼핑몰 제작 프로젝트에 매칭되어 기쁩니다. 어떤 상품을 판매하실 계획인지 알려주세요!</p>
                        <div class="message-time">월요일 오후 2:15</div>
                    </div>
                </div>

                <div class="message user">
                    <div class="message-avatar user">김</div>
                    <div class="message-content">
                        <p>안녕하세요! 핸드메이드 액세서리를 판매하려고 합니다.</p>
                        <div class="message-time">월요일 오후 2:17</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-avatar expert">김</div>
                    <div class="message-content">
                        <p>좋은 아이템이네요! 핸드메이드 제품은 스토리텔링이 중요해서 사진과 설명이 핵심입니다.</p>
                        <p>우선 기본적인 쇼핑몰 구조부터 설계해보겠습니다.</p>
                        <div class="message-time">월요일 오후 2:18</div>
                    </div>
                </div>

                <div class="file-message">
                    <div class="file-info">
                        <div class="file-icon">📄</div>
                        <div class="file-details">
                            <div class="file-name">핸드메이드_쇼핑몰_기본구조.pdf</div>
                            <div class="file-size">1.8 MB</div>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button class="file-btn">다운로드</button>
                        <button class="file-btn secondary">미리보기</button>
                    </div>
                </div>

                <div class="message">
                    <div class="message-avatar expert">김</div>
                    <div class="message-content">
                        <p>위 파일에 기본 구조를 정리해뒀어요. 상품 카테고리, 장바구니, 결제 시스템을 포함했습니다.</p>
                        <p>내일 화요일 오후 2시에 첫 수업을 진행할 예정입니다. 준비해야 할 것들을 알려드릴게요!</p>
                        <div class="message-time">월요일 오후 2:22</div>
                    </div>
                </div>

                <div class="message user">
                    <div class="message-avatar user">김</div>
                    <div class="message-content">
                        <p>네 좋습니다! 혹시 내일 일정을 하루 뒤로 미룰 수 있을까요? 갑자기 회사 업무가 생겼어요.</p>
                        <div class="message-time">월요일 오후 2:30</div>
                    </div>
                </div>

                <div class="warning-message">
                    ⚠️ 일정 변경 안내: 수업 일정은 3일 전에 변경 요청해주세요. 당일이나 1-2일 전 변경시 위약금(수강료의 20%)이 발생할 수 있습니다.
                </div>

                <div class="ai-guide">
                    <div class="ai-guide-header">
                        <span>🤖</span>
                        <div class="ai-guide-title">AI 일정 관리 가이드</div>
                    </div>
                    <div class="ai-guide-content">
                        일정 변경이 감지되었습니다. 현재 수업 24시간 전이므로 위약금이 적용될 수 있습니다. 
                        전문가와 상의하여 일정을 조정하거나, 다음 기회에 미리 변경 요청해주세요.
                    </div>
                </div>

                <div class="message">
                    <div class="message-avatar expert">김</div>
                    <div class="message-content">
                        <p>이해합니다! 이번에는 특별히 수요일 같은 시간으로 변경해드릴게요. 🙂</p>
                        <p>다음번부터는 미리 연락 주시면 더 수월하게 조정할 수 있습니다.</p>
                        <div class="message-time">월요일 오후 2:35</div>
                    </div>
                </div>

                <div class="message user">
                    <div class="message-avatar user">김</div>
                    <div class="message-content">
                        <p>감사합니다! 다음번부터는 미리 연락드리겠습니다. 수요일에 뵙겠습니다!</p>
                        <div class="message-time">월요일 오후 2:37</div>
                    </div>
                </div>

                <div class="system-message">
                    📅 수업 일정이 변경되었습니다: 화요일 → 수요일 오후 2시
                </div>

                <div class="ai-guide">
                    <div class="ai-guide-header">
                        <span>🤖</span>
                        <div class="ai-guide-title">AI 학습 가이드</div>
                    </div>
                    <div class="ai-guide-content">
                        수업 전 준비사항을 체크해보세요! HTML/CSS 기초 복습과 개발환경 설정을 미리 해두시면 수업이 더 효과적입니다.
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator">
                    <div class="message-avatar expert">김</div>
                    <div class="message-content" style="background: var(--gray-100);">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-actions">
                    <button class="action-btn" onclick="scheduleChange()">📅 일정 변경</button>
                    <button class="action-btn" onclick="shareScreen()">🖥️ 화면 공유</button>
                    <button class="action-btn" onclick="sendFile()">📎 파일 전송</button>
                    <button class="action-btn" onclick="requestHelp()">🆘 도움 요청</button>
                </div>
                
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" id="chatInput" placeholder="메시지를 입력하세요..."
                        onkeypress="handleKeyPress(event)"></textarea>
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">→</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        function goBack() {
            window.location.href = 'expert-matching.html';
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // 타이핑 인디케이터 표시
                showTyping();
                
                // 자동 응답 시뮬레이션
                setTimeout(() => {
                    hideTyping();
                    simulateExpertResponse(message);
                }, 2000 + Math.random() * 2000);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function addUserMessage(message) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = 'message user';
            
            const now = new Date();
            const timeString = `오늘 ${now.getHours() >= 12 ? '오후' : '오전'} ${now.getHours() % 12 || 12}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            messageElement.innerHTML = `
                <div class="message-avatar user">김</div>
                <div class="message-content">
                    <p>${message}</p>
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addExpertMessage(message) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = 'message';
            
            const now = new Date();
            const timeString = `오늘 ${now.getHours() >= 12 ? '오후' : '오전'} ${now.getHours() % 12 || 12}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            messageElement.innerHTML = `
                <div class="message-avatar expert">김</div>
                <div class="message-content">
                    <p>${message}</p>
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function simulateExpertResponse(userMessage) {
            const responses = [
                "좋은 질문이네요! 그 부분은 다음과 같이 해결할 수 있어요.",
                "이해하셨군요! 다음 단계로 넘어가봅시다.",
                "맞습니다! 그런 방식으로 접근하시면 됩니다.",
                "그 부분이 조금 어려우실 수 있어요. 차근차근 설명해드릴게요.",
                "실제 프로젝트에서도 많이 사용하는 방법입니다. 잘 이해하고 계시네요!"
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            addExpertMessage(randomResponse);
            
            // 가끔씩 AI 가이드나 경고 메시지 표시
            if (Math.random() < 0.3) {
                setTimeout(() => {
                    showAIGuide();
                }, 1000);
            }
        }

        function showTyping() {
            document.getElementById('typingIndicator').style.display = 'flex';
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function showAIGuide() {
            const guides = [
                "현재 학습 진도가 목표보다 앞서가고 있습니다. 추가 실습 과제를 준비해드릴까요?",
                "지금까지 배운 내용을 복습할 시간입니다. 퀴즈를 통해 이해도를 체크해보세요.",
                "다음 주 일정이 다소 빠듯할 수 있습니다. 미리 예습자료를 확인해보시길 권합니다.",
                "전문가와의 소통이 활발하네요! 이런 적극적인 자세가 학습에 큰 도움이 됩니다."
            ];
            
            const messagesContainer = document.getElementById('chatMessages');
            const guideElement = document.createElement('div');
            guideElement.className = 'ai-guide';
            guideElement.innerHTML = `
                <div class="ai-guide-header">
                    <span>🤖</span>
                    <div class="ai-guide-title">AI 학습 가이드</div>
                </div>
                <div class="ai-guide-content">
                    ${guides[Math.floor(Math.random() * guides.length)]}
                </div>
            `;
            messagesContainer.appendChild(guideElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function scheduleChange() {
            const now = new Date();
            const nextClass = new Date(now.getTime() + (2 * 24 * 60 * 60 * 1000)); // 2일 후
            const timeDiff = nextClass - now;
            const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
            
            if (daysDiff < 3) {
                if (confirm(`⚠️ 일정 변경 경고\n\n수업 ${daysDiff}일 전이므로 위약금(수강료의 20%)이 발생할 수 있습니다.\n\n그래도 일정 변경을 요청하시겠습니까?`)) {
                    addUserMessage('일정 변경을 요청드립니다. 위약금 발생을 확인했습니다.');
                    
                    setTimeout(() => {
                        showTyping();
                        setTimeout(() => {
                            hideTyping();
                            addExpertMessage('일정 변경 요청을 확인했습니다. 가능한 대체 일정을 확인해보겠습니다. 위약금은 실제 변경 완료 후 안내드리겠습니다.');
                            showScheduleWarning();
                        }, 2000);
                    }, 1000);
                }
            } else {
                if (confirm('일정 변경을 요청하시겠습니까? (3일 전이므로 위약금이 발생하지 않습니다)')) {
                    addUserMessage('일정 변경을 요청드립니다.');
                    setTimeout(() => {
                        showTyping();
                        setTimeout(() => {
                            hideTyping();
                            addExpertMessage('일정 변경 요청을 확인했습니다. 가능한 대체 일정을 확인해보겠습니다!');
                        }, 2000);
                    }, 1000);
                }
            }
        }

        function showScheduleWarning() {
            const messagesContainer = document.getElementById('chatMessages');
            const warningElement = document.createElement('div');
            warningElement.className = 'warning-message';
            warningElement.innerHTML = `
                ⚠️ 일정 변경 규정 안내<br>
                • 3일 전 변경: 무료<br>
                • 1-2일 전 변경: 수강료의 20% 위약금<br>
                • 당일 변경: 수강료의 50% 위약금<br>
                <small>특별한 사정이 있으시면 전문가와 개별 상담 가능합니다.</small>
            `;
            messagesContainer.appendChild(warningElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function shareScreen() {
            alert('화면 공유 요청을 보냈습니다. 전문가의 승인을 기다리고 있습니다.');
        }

        function sendFile() {
            alert('파일 전송 기능입니다. 실제 서비스에서는 파일 업로드가 가능합니다.');
        }

        function requestHelp() {
            const helpMessage = '도움이 필요합니다. 현재 진행 중인 부분에서 막혔어요.';
            addUserMessage(helpMessage);
            
            setTimeout(() => {
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addExpertMessage('어떤 부분에서 막히셨나요? 구체적으로 알려주시면 바로 도와드릴게요! 필요하다면 화면 공유로 직접 보여드리겠습니다.');
                }, 1500);
            }, 500);
        }

        // 채팅 입력창 자동 크기 조절
        document.getElementById('chatInput').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // 페이지 로드 시 스크롤을 맨 아래로
        window.addEventListener('load', function() {
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        });

        // 주기적으로 새 메시지 시뮬레이션 (데모용)
        let messageCount = 0;
        setInterval(() => {
            if (messageCount < 2 && Math.random() < 0.08) {
                const demoMessages = [
                    "수업 전 준비사항을 체크리스트로 정리해서 보내드릴게요!",
                    "혹시 개발환경 설정에서 막히는 부분이 있으시면 미리 알려주세요."
                ];
                
                showTyping();
                setTimeout(() => {
                    hideTyping();
                    addExpertMessage(demoMessages[messageCount]);
                    messageCount++;
                    
                    // 가끔씩 AI 가이드 표시
                    if (messageCount === 2) {
                        setTimeout(() => {
                            const messagesContainer = document.getElementById('chatMessages');
                            const aiGuide = document.createElement('div');
                            aiGuide.className = 'ai-guide';
                            aiGuide.innerHTML = `
                                <div class="ai-guide-header">
                                    <span>🤖</span>
                                    <div class="ai-guide-title">AI 학습 도우미</div>
                                </div>
                                <div class="ai-guide-content">
                                    전문가와의 소통이 활발하네요! 수업 전 미리 질문을 준비해두시면 더 효과적인 학습이 가능합니다.
                                    추천 사전 학습 자료를 확인해보시겠어요?
                                </div>
                            `;
                            messagesContainer.appendChild(aiGuide);
                            messagesContainer.scrollTop = messagesContainer.scrollHeight;
                        }, 3000);
                    }
                }, 2000);
            }
        }, 45000); // 45초마다 체크
    </script>
</body>

</html>